import{j as e,B as i,r as m,U as y,X as P,e as f,f as b,R as C,h as q}from"./index-0ada2867.js";import{m as p,n as k,o as Y,r as G,C as E,j as z,p as H,q as Q,v as _,S as I,f as Z,h as K,w as W,x as X,y as J,z as N,$ as T,A as B,P as M,B as $,D as L,E as U,G as ee,H as F,J as se,K as ae,M as te,R as ne,N as le,O as re,Q as R,T as ie,U as oe,V as ce,W as de,X as me,Y as xe,Z as ue,_ as he,a0 as pe,a1 as je,a2 as ve}from"./tabs-2c0b351f.js";import{u as fe}from"./restaurant-bd94c07c.js";import{I as ge}from"./index-3ada7bb4.js";import{M as V}from"./map-pin-64bcb84d.js";import{S as be}from"./index-92be0a52.js";import{P as ye}from"./plus-e730bf28.js";const Ne=()=>{const{reservationFormState:s,dispatch:a}=p();return e.jsxs("div",{children:[e.jsx("p",{className:"mb-4 font-semibold text-sm",children:"Reservation Type"}),e.jsxs("div",{className:"inline-flex rounded-md shadow-sm w-full sm:w-auto",role:"group",children:[e.jsx(i,{className:"font-semibold text-[11px]  rounded-r-none w-full sm:w-auto",type:"button",variant:s.reservationType==="cancelReservation"?"default":"outline",onClick:()=>k(a,"cancelReservation"),children:"Canceled Reservation"}),e.jsx(i,{className:"font-semibold text-[11px] rounded-l-none w-full sm:w-auto",type:"button",variant:s.reservationType==="releaseReservation"?"default":"outline",onClick:()=>k(a,"releaseReservation"),children:"Release Reservation"})]})]})},S="/assets/ProIcon-8623eeb2.svg",Se=()=>{const{reservationFormState:{resturantOptionOnAddReservationPage:{selectedResturantsForReservationOnAddReservationPage:s},errors:{resturantsError:a}},dispatch:t}=p(),n=m.useContext(y);return e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 font-semibold text-sm",children:"Resturants"}),e.jsxs(Y,{onOpenChange:()=>{G(t)},children:[s.map((l,c)=>e.jsxs(E,{className:"flex h-[10vh] my-5",children:[e.jsx("div",{children:e.jsx("img",{className:"rounded-l-lg h-full",src:l.cover_image_url??"../restaurant/restaurant.png",alt:""})}),e.jsx(z,{className:"p-0 px-5 space-y-2 my-auto w-full",children:e.jsxs("div",{className:"space-y-1 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold",children:l.venue_name}),e.jsx("p",{className:"font-medium text-xs text-light capitalize",children:l.avilableSittings})]}),e.jsx(P,{className:"cursor-pointer ",onClick:()=>H(t,l)})]})})]},c)),e.jsx(Q,{asChild:!0,className:"",children:e.jsxs(i,{variant:"outline",className:"inline-flex font-semibold text-[11px] relative",disabled:n.subscription_type==="standard"&&s.length>0,children:[n.subscription_type==="standard"&&s.length>0&&e.jsx("img",{src:S,alt:"pro icon",className:"absolute right-0 top-0"}),e.jsx(ye,{className:"mr-3 "})," Add Reservation"]})}),e.jsx(Oe,{})]}),a&&!s.length&&e.jsx(w,{message:"Please select a restaurant"})]})},A=[{value:1,label:"1",type:"button"},{value:2,label:"2",type:"button"},{value:3,label:"3",type:"button"},{value:4,label:"4",type:"button"}],Ce=()=>{const s=m.useContext(y),{dispatch:a,reservationFormState:{partySize:t,errors:{partySizeError:n}}}=p(),[l,c]=m.useState(A);return m.useEffect(()=>{Number(t)>=5&&c([...A,{value:Number(t),label:t.toString(),type:"button"}])},[t]),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 font-semibold text-sm",children:"Party size"}),e.jsxs("div",{className:"flex gap-3",children:[l.map(d=>e.jsx(i,{role:"button",onClick:()=>_(a,Number(d.value)),variant:t===Number(d.value)?"default":"outline",className:"inline-flex",children:d.label},d.label)),s.subscription_type==="standard"?e.jsxs("span",{className:f(b({variant:"outline"}),"relative"),children:["Custom"," ",e.jsx("img",{src:S,alt:"pro icon",className:"absolute right-0 top-0"})]}):e.jsxs(I,{onValueChange:d=>_(a,parseInt(d)+5),children:[e.jsx(Z,{className:"w-auto flex-row-reverse gap-4 text-light relative",children:"Custom"}),e.jsx(K,{children:e.jsx(W,{children:Array(4).fill("").map((d,h)=>e.jsxs(X,{value:h.toString(),children:[5+h," people"]},h))})})]})]}),n&&!t&&e.jsx(w,{message:"Please select a part size"})]})},Re=new Date(2020,10,15),we=[{value:new Date,label:"Today",type:"button"},{value:new Date(+new Date+864e5),label:"Tommorow",type:"button"}],De=()=>{const s=m.useContext(y),{dispatch:a}=p(),t=[],[n,l]=C.useState(t),[c,d]=C.useState(we),[h,v]=C.useState([]);m.useEffect(()=>J(a,h),[h]);function g(o,x){return x?h.includes(o)?v(u=>u.filter(r=>r!==o)):v(u=>[...u,o]):v(u=>[...u,o])}const D=n&&n.length>0?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mt-3"}),e.jsxs("p",{className:"flex justify-end mt-4 gap-3",children:[e.jsx(T,{children:e.jsx("span",{className:f(b({variant:"outline"})),children:"Cancel"})}),e.jsx(T,{children:e.jsx("span",{className:f(b({variant:"primary"})),onClick:()=>{d(o=>(n.forEach(x=>{o.some(r=>r.value===x)||o.push({value:x,label:B(x,"PP"),type:"button"})}),[...o])),n.forEach(o=>{g(o,!1)})},children:"Confirm"})})]})]}):e.jsx("p",{children:"Please pick one or more days."});return e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 font-semibold text-sm",children:"Reservation Date"}),e.jsxs("div",{className:"flex gap-3",children:[c.map((o,x)=>e.jsxs("span",{onClick:()=>g(o.value,!0),className:f(b({variant:h.includes(o.value)?"default":"outline"}),"inline-flex cursor-pointer"),children:[o.label.toLocaleString()," ",x>1&&e.jsx(P,{onClick:()=>{d(u=>u.filter(r=>r.value!==o.value))},size:15})]},x)),s.subscription_type==="standard"?e.jsxs("span",{className:f(b({variant:"outline"}),"relative"),children:["Custom"," ",e.jsx("img",{src:S,alt:"pro icon",className:"absolute right-0 top-0"})]}):e.jsx(I,{disabled:!0,onValueChange:o=>console.log(o),children:e.jsxs(M,{children:[e.jsx($,{asChild:!0,disabled:s.subscription_type==="standard",children:e.jsx(i,{variant:"outline",className:" text-light relative",children:"Custom"})}),e.jsx(L,{className:"w-auto p-0",align:"start",children:e.jsx(U,{id:"test",mode:"multiple",defaultMonth:Re,selected:n,footer:D,onSelect:l})})]})})]}),e.jsx(w,{message:"Please set reservation date"})]})},Te=()=>{const s=new Date(2020,10,15),a={from:s,to:ee(s,4)},[t,n]=C.useState(a);let l=e.jsx("p",{children:"Please pick the first day."});return t!=null&&t.from&&(t.to?t.to&&(l=e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mt-3"}),e.jsxs("p",{className:"flex justify-end mt-4",children:[e.jsx(T,{className:"",children:e.jsx(i,{variant:"outline",className:"",children:"Cancel"})}),e.jsx(i,{variant:"default",className:" ml-2 w-2/6",children:"Confirm"})]})]})):l=e.jsx("p",{children:B(t.from,"PPP")})),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 font-semibold text-sm",children:"Reservation Time"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(i,{variant:"outline",className:"inline-flex",children:"Early"}),e.jsx(i,{variant:"outline",className:"inline-flex",children:"Prime"}),e.jsx(i,{variant:"outline",className:"inline-flex",children:"Late"}),e.jsxs(M,{children:[e.jsx($,{asChild:!0,children:e.jsx(i,{variant:"outline",className:" text-light ",children:"Custom"})}),e.jsx(L,{className:"w-auto p-0",align:"start",children:e.jsx(U,{id:"test",mode:"range",defaultMonth:s,selected:t,footer:l,onSelect:n})})]})]}),e.jsx(w,{message:"Please set reservation time"})]})},Pe=[{value:"same_day",label:"Same day",type:"button"},{value:"2_days_before",label:"2 days before",type:"button"},{value:"3_days_before",label:"3 days before",type:"button"}],ke=()=>{const{dispatch:s,reservationFormState:{finalSnipingDay:a}}=p(),t=m.useContext(y),[n]=m.useState(Pe);return e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 font-semibold text-sm",children:"Final Sniping Day"}),e.jsxs("div",{className:"flex gap-1 sm:gap-3 ",children:[e.jsx(i,{variant:a==="any"?"default":"outline",className:"inline-flex",onClick:()=>{F(s,"any")},children:"Any"}),t.subscription_type==="standard"?e.jsxs(e.Fragment,{children:[" ",n.map((l,c)=>e.jsxs(i,{variant:a===l.value?"default":"outline",className:"inline-flex relative",children:[l.label," ",e.jsx("img",{src:S,alt:"pro icon",className:"absolute right-0 top-0"})]},c))]}):e.jsxs(e.Fragment,{children:[" ",n.map((l,c)=>e.jsx(i,{variant:a===l.value?"default":"outline",className:"inline-flex",onClick:()=>{F(s,l.value)},children:l.label},c))]})]})]})},_e=()=>{const{reservationFormState:s,dispatch:a}=p();return e.jsxs("div",{className:"flex flex-row items-center justify-between  sm:p-3 ",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"mb-2 font-semibold text-sm",children:"Overide current Reservation"}),e.jsx("div",{className:"font-normal text-xs",children:"Resy and OpenTable only allow one reservation at a time. If you enable this option, it will replace your current reservation."})]}),e.jsx("div",{children:e.jsx(se,{name:"overideCurrentReservation",checked:s.overideCurrentReservationToggleSection,onCheckedChange:t=>ae(a,t)})})]})},Fe=()=>{const{reservationFormState:s,dispatch:a}=p();return e.jsxs("div",{className:"flex justify-between flex-col-reverse sm:flex-row gap-2 text-center",children:[e.jsx("p",{className:"text-xs font-semibold ",children:"2 of 25 reservation requests used"}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(Ee,{children:e.jsx(i,{variant:"outline",children:"Cancel"})}),e.jsx(i,{variant:"primary",onClick:()=>{te(a);const{resturantOptionOnAddReservationPage:{selectedResturantsForReservationOnAddReservationPage:t},partySize:n,reservationDates:l}=s;if(!t.length||!n||!l.length)return console.log("invalid")},children:"Reserve"})]})]})},Ae=()=>e.jsx(ne,{children:e.jsxs("div",{className:"w-full p-5 sm:p-10 flex flex-col gap-4",children:[e.jsx("h1",{className:" font-bold text-2xl",children:"Add Reservation"}),e.jsx(Ne,{}),e.jsx("p",{className:"text-light text-[11px]",children:" Reasy Sniper will look for Canceled reservation and book it for you "}),e.jsx(Se,{}),e.jsx(Ce,{}),e.jsx(De,{}),e.jsx(Te,{}),e.jsx(ke,{}),e.jsx(_e,{}),e.jsx(N,{className:"my-4"}),e.jsx(Fe,{})]})}),O=[{lable:"Indoor",value:"indoor"},{lable:"Outdoor",value:"outdoor"}],Oe=()=>{const s=m.useContext(y),[a,t]=m.useState("any"),{reservationFormState:n,dispatch:l}=p(),{searchRestaurants:c,isLoading:d}=fe(),[h,v]=q({query:""}),[g,D]=m.useState("");m.useEffect(()=>{const r=setTimeout(()=>{v(j=>(j.set("query",g),j))},500);return()=>clearInterval(r)},[g,v]);const o=m.useMemo(()=>{if(!d)return(c==null?void 0:c.data)??[]},[d,c==null?void 0:c.data]);function x(r){D(r.target.value)}function u(r){ce(l,r)}return e.jsxs(ge,{className:f("max-w-2xl h-screen sm:h-auto",n.selectSittingOptions.showModel&&"p-4"),children:[e.jsx(le,{className:"",children:e.jsxs(re,{className:" mb-0 sm:mb-5 text-start font-bold text-2xl flex justify-between",children:[e.jsxs("span",{children:[" ",n.selectSittingOptions.title]}),e.jsx(R,{className:"sm:hidden",children:e.jsx("span",{role:"button",children:e.jsx(P,{})})})]})}),n.selectSittingOptions.showModel?e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("div",{children:e.jsx("img",{className:"rounded-lg w-full object-cover",src:n.selectSittingOptions.restaurantDetail.cover_image_url??"../reservation/AddReservation/Img.png",alt:""})}),e.jsxs("div",{children:[e.jsxs("p",{className:"my-3 text-xs font-normal text-gray-700 dark:text-gray-400",children:[n.selectSittingOptions.restaurantDetail.price,"$"]}),e.jsx("h5",{className:"mb-2 text-base font-bold tracking-tight ",children:n.selectSittingOptions.restaurantDetail.venue_name}),e.jsxs("p",{className:"mb-3  text-xs font-normal ",children:[e.jsx(V,{className:"inline-block"})," Prospective height"]}),e.jsx("p",{className:"font-normal text-xs text-light",children:"Talk about returning to your roots: Though known for his sophisticated high-end French cuisine, Daniel Boulud is from the great gastronomic capital of Lyon and with Le Gratin, he pays tribute to the hearty, homey cooking of the convivial Lyonnais bistros known as bouchons. The defining dish here? The creamy potato extravaganza that is the gratin dauphinois, of course."}),e.jsx("h2",{className:"font-semibold text-sm my-3",children:"Available sittings"}),e.jsxs("div",{className:"flex w-1/2 gap-2",children:[e.jsx(i,{onClick:()=>{t("any")},variant:a==="any"?"default":"outline",className:"w-full",children:"Any"}),s.subscription_type==="standard"?e.jsxs(e.Fragment,{children:[" ",O.map((r,j)=>e.jsxs(i,{variant:a===r.value?"default":"outline",className:"w-full relative",children:[r.lable,e.jsx("img",{src:S,alt:"pro icon",className:"absolute right-0 top-0"})]},j))]}):e.jsx(e.Fragment,{children:O.map((r,j)=>e.jsx(i,{onClick:()=>{t(r.value)},variant:a===r.value?"default":"outline",className:"w-full",children:r.lable},j))})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{onChange:x}),e.jsx(ie,{className:"sm:h-80 rounded-md",children:e.jsx("span",{className:"flex flex-col gap-4",children:!d&&o.map((r,j)=>e.jsx(ze,{restaurant:r,onResturantCardClick:u},j))})})]}),e.jsx(N,{}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(i,{variant:"outline",className:"",children:"Cancel"}),e.jsx(R,{className:"",children:e.jsx(i,{variant:"primary",className:"",onClick:()=>{const r=n.selectSittingOptions.restaurantDetail;Object.defineProperty(r,"availableSittings",{value:a,writable:!1,enumerable:!0,configurable:!0}),oe(l,r)},children:"Confirm"})})]})]})},Ee=({children:s})=>{const{dispatch:a}=p();return e.jsx(e.Fragment,{children:e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:s}),e.jsxs(xe,{className:"sm:max-w-2xl",children:[e.jsxs(ue,{children:[e.jsx(he,{children:"Discard Changes?"}),e.jsx(pe,{children:"You have made changes to the reservation. Would you like to discard them ?"})]}),e.jsx(N,{}),e.jsxs(je,{children:[e.jsx(R,{asChild:!0,children:e.jsx(i,{variant:"outline",className:"w-full sm:w-auto",children:"Keep Editing"})}),e.jsx(R,{asChild:!0,children:e.jsx(i,{type:"submit",variant:"primary",onClick:()=>ve(a),children:"Discard Changes"})})]})]})]})})},ze=({restaurant:s,onResturantCardClick:a})=>e.jsx(e.Fragment,{children:e.jsxs(E,{className:"flex cursor-pointer",role:"button",onClick:()=>a(s),children:[e.jsx("img",{className:"rounded-lg w-1/3",src:s.cover_image_url??"../restaurant/restaurant.png",alt:""}),e.jsxs(z,{className:"w-full",children:[e.jsxs("p",{className:"my-3 text-xs font-normal text-gray-700 dark:text-gray-400",children:["$",s.price]}),e.jsx("h5",{className:"mb-2 text-base font-bold tracking-tight ",children:s.venue_name}),e.jsxs("p",{className:"mb-3  text-xs font-normal text-gray-700 dark:text-gray-400",children:[e.jsx(V,{className:"inline-block"})," ",s.locality]})]})]})}),w=({message:s})=>e.jsx("div",{className:"py-2 text-sm rounded-lg  text-error relative",role:"alert",children:e.jsx("span",{className:"font-medium absolute",children:s})}),qe=()=>e.jsxs("div",{className:"grid  grid-cols-1 sm:grid-cols-2 place-items-center h-dvh ",children:[e.jsx("div",{className:"h-full w-full bg-[url('./reservation/reservationform.png')] hidden sm:block"}),e.jsx(Ae,{})]});export{qe as default};
