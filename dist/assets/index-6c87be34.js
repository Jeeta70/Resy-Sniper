import{j as s,B as o,r as w}from"./index-cebdadc5.js";import{C as p,j as f,a as N,k as l,F as b,b as m,c as i,d,e as x,I as u,f as j,t as g,l as y,m as S,n as C,o as A,p as h}from"./index-f41352d0.js";const k=({image:n,cardStyle:a})=>s.jsxs(p,{className:a,children:[s.jsx(f,{children:s.jsx("img",{src:n,alt:"",className:"h-10 w-24"})}),s.jsx(R,{})]}),F=({image:n,cardStyle:a})=>{const e=N({resolver:g(y),defaultValues:{email:"",password:""}});function c(t){console.log(t)}return s.jsxs(p,{className:a,children:[s.jsx(f,{children:s.jsx("img",{src:n,alt:"",className:"h-10 w-24"})}),s.jsx(l,{children:s.jsx(b,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(c),className:"space-y-6",children:[s.jsx(m,{control:e.control,name:"email",render:({field:t})=>s.jsxs(i,{className:"relative",children:[s.jsx(d,{className:"text-sm font-normal",children:"Email"}),s.jsx(x,{children:s.jsx(u,{placeholder:"Your email",...t})}),s.jsx(j,{className:"absolute -bottom-5 text-xs"})]})}),s.jsx(m,{control:e.control,name:"password",render:({field:t})=>s.jsxs(i,{className:"relative",children:[s.jsx(d,{className:"text-sm font-normal",children:"Password"}),s.jsx(x,{children:s.jsx(u,{placeholder:"Your password",...t})}),s.jsx(j,{className:"absolute -bottom-5 text-xs"})]})}),s.jsx(o,{className:"w-full",type:"submit",children:"Connect"})]})})})]})};function E(n){const a=localStorage.getItem("token");return a?JSON.parse(a)[n]:null}const I=()=>{const{mutate:n,isPending:a}=S({mutationFn:({email:e,password:c})=>C.post(`${A}/api/resylogin`,{email:e,password:c},{headers:{Authorization:`Bearer ${E("access_token")}`}}),onSuccess:()=>{h({description:"sucessfully connected",variant:"dark"})},onError:()=>h({description:"some issue in connecting account",variant:"destructive"})});return{connectResyAccount:n,isLoading:a}},R=()=>{const{connectResyAccount:n,isLoading:a}=I(),[e,c]=w.useState("default"),t=N({resolver:g(y),defaultValues:{email:"",password:""}});function v(r){n(r,{onSuccess:()=>{c("success"),t.reset()},onError:()=>{c("error")}})}return s.jsxs(s.Fragment,{children:[e==="default"&&s.jsx(l,{children:s.jsx(b,{...t,children:s.jsxs("form",{onSubmit:t.handleSubmit(v),className:"space-y-6",children:[s.jsx(m,{control:t.control,name:"email",render:({field:r})=>s.jsxs(i,{className:"relative",children:[s.jsx(d,{className:"text-sm font-normal",children:"Email"}),s.jsx(x,{children:s.jsx(u,{placeholder:"Your email",...r})}),s.jsx(j,{className:"absolute -bottom-5 text-xs"})]})}),s.jsx(m,{control:t.control,name:"password",render:({field:r})=>s.jsxs(i,{className:"relative",children:[s.jsx(d,{className:"text-sm font-normal",children:"Password"}),s.jsx(x,{children:s.jsx(u,{placeholder:"Your password",...r})}),s.jsx(j,{className:"absolute -bottom-5 text-xs"})]})}),s.jsx(o,{className:"w-full",type:"submit",disabled:a,children:"Connect"})]})})}),e==="success"&&s.jsx(l,{className:"grid gap-4 h-4/6",children:s.jsxs("div",{className:"item-center space-y-10",children:[s.jsx("img",{src:"./connectAccount/connectedTick.svg",alt:"",srcSet:"",className:"mx-auto"}),s.jsx("div",{className:"space-y-1",children:s.jsx("p",{className:"text-sm font-medium text-light text-center",children:"Your Resy account successfully connected"})}),s.jsx(o,{className:"w-full",type:"submit",variant:"selected",disabled:!0,children:"Connected"})]})}),e==="error"&&s.jsx(l,{className:"grid gap-4 h-4/6",children:s.jsxs("div",{className:"item-center space-y-10",children:[s.jsx("img",{src:"./connectAccount/incorrectPasswordIcon.svg",alt:"",srcSet:"",className:"mx-auto"}),s.jsx("div",{className:"space-y-1",children:s.jsx("p",{className:"text-sm font-medium text-light text-center",children:"Email and password do not match"})}),s.jsx(o,{className:"w-full",type:"submit",variant:"default",onClick:()=>c("default"),children:"TryAgain"})]})})]})},P=()=>s.jsxs("div",{className:"sm:h-svh sm:w-svw flex flex-col justify-evenly p-4 sm:justify-evenly",children:[s.jsxs("div",{className:"mb-3 sm:mb-0 text-center",children:[s.jsx("h1",{className:"sm:mb-14 text-primary text-4xl font-bold",children:"RESY SNIPER"}),s.jsxs("span",{children:[s.jsx("h2",{className:"font-bold text-2xl",children:"Connect Accounts"}),s.jsx("p",{className:"text-light font-normal text-sm",children:"At least one account should be connected"})]})]}),s.jsxs("div",{className:"flex flex-col justify-center items-center sm:flex-row gap-4 sm:gap-10",children:[s.jsx(k,{image:"./connectAccount/resy.svg",cardStyle:"w-full sm:w-[350px] mr-0 sm:ml-auto h-96"}),s.jsx(F,{image:"./connectAccount/openTable.svg",cardStyle:"w-full sm:w-[350px] mr-0 sm:mr-auto h-96"})]}),s.jsx(o,{className:"w-full sm:w-auto mt-4 sm:mt-0 mx-auto ",variant:"outline",type:"submit",children:"Continue"})]});export{P as default};
